class SpriteCover{constructor(spriteElement,container,frameWidth,frameHeight,frameCount){this.sprite=spriteElement;this.container=container;this.frameWidth=frameWidth;this.frameHeight=frameHeight;this.currentFrame=0;this.totalFrames=frameCount;this.scale=1;this.xCenter=0;this.yCenter=0;this.resizeObserver=new ResizeObserver(()=>this.updateSize());this.resizeObserver.observe(container);this.initSprite();this.updateSize();}
destroy(){this.resizeObserver.disconnect();}
initSprite(){this.sprite.parentElement.parentElement.style.width=`${this.frameWidth * this.totalFrames}px`;this.sprite.parentElement.parentElement.style.height=`${this.frameHeight}px`;}
updateSize(){const containerWidth=Math.abs(this.container.clientWidth);const containerHeight=Math.abs(this.container.clientHeight);if(containerWidth>containerHeight){this.scale=containerWidth/this.frameWidth;console.log("containerWidth =",containerWidth,"this.frameWidth= ",this.frameWidth);this.yCenter=-this.frameHeight*(((containerWidth-containerHeight)/2)/containerWidth);this.xCenter=0;}
else if(containerHeight>containerWidth){this.scale=containerHeight/this.frameHeight;console.log("containerHeight =",containerHeight,"this.frameHeight= ",this.frameHeight);this.xCenter=-this.frameWidth*(((containerHeight-containerWidth)/2)/containerHeight);this.yCenter=0;}
else{this.scale=containerHeight/this.frameHeight;this.xCenter=0;this.yCenter=0;}
this.sprite.parentElement.parentElement.style.transform=`scale(${this.scale})`;this.updateTransform();}
updateTransform(){const xOffset=-this.currentFrame*this.frameWidth+this.xCenter;this.sprite.style.transform=`translateX(${xOffset}px) translateY(${this.yCenter}px)`;}
setFrame(index){this.currentFrame=index;this.updateTransform();}}
const textTimeline=[{time:0,text:"Ð¿ÐµÑ€Ð²Ð¾Ð³Ð¾ Ð¿Ð¾Ð³Ñ€ÑƒÐ¶ÐµÐ½Ð¸Ñ Ñ Ð°ÐºÐ²Ð°Ð»Ð°Ð½Ð³Ð¾Ð¼ Ð² ÐšÑ€Ð°ÑÐ½Ð¾Ð¼ Ð¼Ð¾Ñ€Ðµ"},{time:0.99,text:"Ñ€Ð¾Ð¼Ð°Ð½Ñ‚Ð¸Ñ‡ÐµÑÐºÐ¾Ð³Ð¾ ÑƒÐ¶Ð¸Ð½Ð° Ð½Ð° Ð¿Ð»ÑÐ¶Ðµ ÐœÐ°Ð»ÑŒÐ´Ð¸Ð²"},{time:1.88,text:"Ð¿Ð¾Ð»ÐµÑ‚Ð° Ð½Ð° Ð²Ð¾Ð·Ð´ÑƒÑˆÐ½Ð¾Ð¼ ÑˆÐ°Ñ€Ðµ Ð½Ð°Ð´ ÐšÐ°Ð¿Ð¿Ð°Ð´Ð¾ÐºÐ¸ÐµÐ¹"},{time:2.66,text:"ÐºÑƒÐ¿Ð°Ð½Ð¸Ñ ÑÐ¾ ÑÐ»Ð¾Ð½Ð°Ð¼Ð¸ Ð² Ð¢Ð°Ð¸Ð»Ð°Ð½Ð´Ðµ"},{time:3.38,text:"Ð·Ð°Ð²Ñ‚Ñ€Ð°ÐºÐ° Ð² Ð±Ð°ÑÑÐµÐ¹Ð½Ðµ Ð½Ð° Ð²Ð¸Ð»Ð»Ðµ Ð² Ð”ÑƒÐ±Ð°Ðµ"},{time:4.04,text:"Ð¿ÐµÑ€Ð²Ð¾Ð³Ð¾ ÑƒÑ€Ð¾ÐºÐ° ÑÐµÑ€Ñ„Ð¸Ð½Ð³Ð° Ð½Ð° Ð‘Ð°Ð»Ð¸"},{time:4.67,text:"Ð¿Ñ€Ð¾Ð³ÑƒÐ»ÐºÐ¸ Ð½Ð° ÑÑ…Ñ‚Ðµ Ð¿Ð¾ Ð¿Ð¾Ð±ÐµÑ€ÐµÐ¶ÑŒÑŽ Ð”ÑƒÐ±Ð°Ñ"},{time:5.29,text:"Ð¿ÐµÑ€Ð²Ð¾Ð³Ð¾ Ð·Ð°Ð¿Ð»Ñ‹Ð²Ð° Ñ Ñ‡ÐµÑ€ÐµÐ¿Ð°Ñ…Ð°Ð¼Ð¸ Ð½Ð° ÐœÐ°Ð»ÑŒÐ´Ð¸Ð²Ð°Ñ…"},{time:5.91,text:"Ð¿Ð¾ÑÐµÑ‰ÐµÐ½Ð¸Ñ Ñ‚ÐµÑ€Ð¼Ð°Ð»ÑŒÐ½Ñ‹Ñ… Ð¸ÑÑ‚Ð¾Ñ‡Ð½Ð¸ÐºÐ¾Ð² ÐŸÐ°Ð¼ÑƒÐºÐºÐ°Ð»Ðµ"},{time:6.55,text:"Ð´ÐµÐ³ÑƒÑÑ‚Ð°Ñ†Ð¸Ð¸ Ð¼ÐµÑÑ‚Ð½Ð¾Ð¹ ÐºÑƒÑ…Ð½Ð¸ Ð² Ð¡Ñ‚Ð°Ð¼Ð±ÑƒÐ»Ðµ"},{time:7.24,text:"Ñ€Ñ‹Ð±Ð°Ð»ÐºÐ¸ Ð½Ð° Ð·Ð°ÐºÐ°Ñ‚Ðµ Ð² Ð˜Ð½Ð´Ð¸Ð¹ÑÐºÐ¾Ð¼ Ð¾ÐºÐµÐ°Ð½Ðµ"},{time:7.98,text:"Ð¿ÐµÑ€Ð²Ð¾Ð³Ð¾ ÑƒÑ€Ð¾ÐºÐ° Ð´Ð°Ð¹Ð²Ð¸Ð½Ð³Ð° Ð² Ð±Ð°ÑÑÐµÐ¹Ð½Ðµ"},{time:8.82,text:"ÑÐ¿Ð°-Ñ€Ð¸Ñ‚ÑƒÐ°Ð»Ð° Ñ Ð²Ð¸Ð´Ð¾Ð¼ Ð½Ð° Ð¾ÐºÐµÐ°Ð½"},{time:9.75,text:"Ñ…Ð°Ð¼Ð¼Ð°Ð¼Ð° Ð² Ð»ÑƒÑ‡ÑˆÐ¸Ñ… Ñ‚Ñ€Ð°Ð´Ð¸Ñ†Ð¸ÑÑ… Ð¢ÑƒÑ€Ñ†Ð¸Ð¸"},{time:10.8,text:"Ñ‚Ð°Ð¹ÑÐºÐ¾Ð³Ð¾ Ð¼Ð°ÑÑÐ°Ð¶Ð° Ð½Ð° Ð¿Ð»ÑÐ¶Ðµ"},];async function loadInto(){let controller=new AbortController();let{signal}=controller;intro:try{let loadedProgressSteps=0;const allProgressSteps=2;function updateProgress(loadedCount,allCount){setLoadProgress((loadedProgressSteps+loadedCount)*100/(allProgressSteps+allCount))}
console.log("ðŸ”¹ Step 0: get intro show flag");introFlags=await loadStep([checkIntroFlags(),loadCSS("css/bootstrap.element.min.css"),loadScript("https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js")],signal);if(introFlags.includes("returned")){await loadStep([prepareSkipButtons(".slide-container.zero-slide ~ [class*='-slide']",controller),],signal);}
else if(introFlags.includes("skip")){console.log("skipping intro");skipIntro();break intro;}
console.log("ðŸ”¹ Step 2: load zero slide css");await loadStep([loadCSS("css/zero.min.css"),],signal);document.body.style.display='block';console.log("ðŸ”¹ Step 3: load lazy load js");await loadStep([loadScript("https://cdn.jsdelivr.net/npm/vanilla-lazyload@19.1.3/dist/lazyload.min.js","LazyLoad"),],signal);console.log("ðŸ”¹ Step 4: load zero slide resources");await loadStep([loadResources(".slide-container.zero-slide .lazy",null),],signal);loadedProgressSteps++;updateProgress(0,allProgressSteps);console.log("ðŸ”¹ Step 5: load main css");await loadStep([loadCSS("css/style.min.css"),loadScript("https://cdnjs.cloudflare.com/ajax/libs/fitty/2.3.2/fitty.min.js","fitty")],signal);loadedProgressSteps++;updateProgress(0,allProgressSteps);console.log("ðŸ”¹ Step 6: load intro slides resources");const step6Results=await loadStep([loadResources(".slide-container.zero-slide ~ [class*='-slide'] .lazy",updateProgress),loadCSS("css/bootstrap.element.min.css"),loadScript("https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"),initSprite()],signal);console.log("ðŸ”¹ Step 7: waiting resources progress");await loadStep([waitForProgressCompete(),],signal);loadCSS("css/element-icons.min.css");console.log("ðŸ”¹ Step 8: blue part animation");await loadStep([showBluePartAnimation(),],signal);console.log("ðŸ”¹ Step 9: hide zero slide and begin slideshow");await loadStep([removeSlide(document.querySelector(".slide-container.zero-slide")),startSlidesCycle(".slide-container.zero-slide ~ [class*='-slide']",step6Results[3])],signal);}
catch(error){if(error.name==="AbortError"){console.log("â© Loading skipped by user");skipIntro();}else{console.error("âŒ Error loading page:",error);}}
controller=new AbortController();signal=controller.signal;try{console.log("ðŸ”¹ Step 10: loading main page scripts");await loadStep([loadScript("https://cdn.jsdelivr.net/npm/vanilla-lazyload@19.1.3/dist/lazyload.min.js","LazyLoad"),loadCSS("css/bootstrap.element.min.css"),loadScript("https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"),loadScript("https://player.vimeo.com/api/player.js")],signal);console.log("ðŸ”¹ Step 11: loading main page resources");const step11Results=await loadStep([loadCSS("css/style.min.css"),loadResources(".video-banner-poster-lazy"),initLazyLoad(),],signal);window.lazyLoadInstance=step11Results[2];console.log("ðŸ”¹ Step 12: showing page and lazyload remaining resources");const step12Results=await loadStep([enableMainPage(),showMainPage(),loadCSS("css/element-icons.min.css")],signal);}
catch(error){if(error.name==="AbortError"){console.log("â© Loading skipped by user");await showMainPage();}else{console.error("âŒ Error loading page:",error);await showMainPage();}}}
async function loadStep(promises,signal){return new Promise((resolve,reject)=>{if(signal?.aborted){reject(new DOMException("Aborted","AbortError"));return;}
const onAbort=()=>{reject(new DOMException("Aborted","AbortError"));};signal?.addEventListener("abort",onAbort,{once:true});Promise.all(promises.map(p=>p.catch(err=>{console.error("ÐžÑˆÐ¸Ð±ÐºÐ° Ð² loadStep:",err);throw err;}))).then(resolve).catch(reject).finally(()=>{signal?.removeEventListener("abort",onAbort);});});}
async function loadCSS(href){return new Promise((resolve,reject)=>{if(document.querySelector(`link[href="${href}"]`)){console.log("Loaded css: "+href);return resolve();}
const link=document.createElement("link");link.rel="stylesheet";link.href=href;link.onload=()=>{console.log("Loaded css: "+href);resolve();};link.onerror=reject;document.head.appendChild(link);});}
function loadScript(src,globalVar=null,checkInterval=10,timeout=5000){function loadScriptInternal(src,globalVar=null,checkInterval=10,timeout=5000){return new Promise((resolve,reject)=>{if(document.querySelector(`script[src="${src}"]`)){if(!globalVar||window[globalVar])return resolve(window[globalVar]);}
const script=document.createElement("script");script.src=src;script.onload=()=>{if(!globalVar){console.log("Loaded script: "+src);resolve();return;}
const startTime=Date.now();const checkVar=setInterval(()=>{if(window[globalVar]){clearInterval(checkVar);console.log("Loaded script: "+src);resolve(window[globalVar]);}else if(Date.now()-startTime>timeout){clearInterval(checkVar);reject(new Error(`Timeout: ${globalVar} Ð½Ðµ Ð¿Ð¾ÑÐ²Ð¸Ð»ÑÑ Ð¿Ð¾ÑÐ»Ðµ ${timeout} Ð¼Ñ`));}},checkInterval);};script.onerror=()=>reject(new Error(`ÐžÑˆÐ¸Ð±ÐºÐ° Ð·Ð°Ð³Ñ€ÑƒÐ·ÐºÐ¸: ${src}`));document.head.appendChild(script);});}
return new Promise((resolve,reject)=>{function attempt(remainingAttempts){loadScriptInternal(src).then(resolve).catch((err)=>{if(remainingAttempts>0){setTimeout(()=>attempt(remainingAttempts-1),1000);}else{reject(err);}});}
attempt(3);});}
async function loadResources(selector,updateProgress){console.log("starting loading resources for: ",selector);return new Promise((resolve,reject)=>{let elementsCount=0;const lazyLoad=new LazyLoad({elements_selector:selector,callback_loaded:(elem)=>{if(!elementsCount){elementsCount=lazyLoad.toLoadCount+1;}
if(updateProgress){updateProgress((elementsCount-lazyLoad.toLoadCount),elementsCount);}},callback_finish:(lazyInstance)=>{lazyInstance.destroy();elementsCount=0;if(updateProgress){updateProgress(elementsCount,elementsCount);}
resolve();}});lazyLoad.loadAll();});}
function getLocalStorageValue(key){let value=localStorage.getItem(key)?parseInt(localStorage.getItem(key),10)||0:0;return value;}
function incrementLocalStorageValue(key){let value=getLocalStorageValue(key);localStorage.setItem(key,(value+1).toString());}
async function checkIntroFlags(){return new Promise((resolve,reject)=>{const MAX_SKIP_COUNT=3;let visitCount=getLocalStorageValue('siteVisits');let skipCount=getLocalStorageValue('skipIntro');incrementLocalStorageValue('siteVisits');console.log("visitCount = ",visitCount,"skipCount =",skipCount);if(skipCount>=MAX_SKIP_COUNT){resolve("skip");}else if(visitCount===1){resolve("first_visit");}else{resolve("returned");}});}
async function prepareSkipButtons(slidesSelector,controller){return new Promise((resolve,reject)=>{let slides=document.querySelectorAll(slidesSelector);if(slides){slides.forEach((slide)=>{let skipButton=slide.querySelector('.btn-skip');if(skipButton){skipButton.style.display='block';skipButton.addEventListener('click',()=>{console.log("â© User clicked skip");controller.abort();});}
else{reject("no skip buttons found");}});}
resolve("ok");});}
let currentProgress=0;let animationQueue=[];let isAnimating=false;let startTime=0;function setLoadProgress(targetProgress){if(!startTime){console.error("DOM not loaded");return;}
if(isAnimating){animationQueue.push(targetProgress);return;}
if(targetProgress>0&&targetProgress<101){logo=document.querySelector(".lazy.logo").contentDocument;if(!logo)return;const maskRect=logo.getElementById('maskRect');if(maskRect){const diff=Math.abs(targetProgress-currentProgress);const duration=(diff/100)*1;let elapsedTime=(performance.now()-startTime)/1000;const animateY=createSVGAnimation(maskRect,"animate","animateY","y",`${100 - currentProgress}%`,`${100 - targetProgress}%`,`${duration}s`,`${elapsedTime}s`);const animateHeight=createSVGAnimation(maskRect,"animate","animateHeight","height",`${currentProgress}%`,`${targetProgress}%`,`${duration}s`,`${elapsedTime}s`);console.log(`progress update ${currentProgress} -> ${targetProgress} duration ${duration}`);isAnimating=true;function onAnimationEnd(){isAnimating=false;currentProgress=targetProgress;if(animationQueue.length>0){const nextProgress=animationQueue.shift();if(nextProgress>targetProgress){setLoadProgress(nextProgress);}}
else{animateY.removeEventListener("endEvent",onAnimationEnd);}}
animateY.addEventListener("endEvent",onAnimationEnd);}}}
function waitForProgressCompete(){return new Promise((resolve,reject)=>{function onAnimationEnd(){if(currentProgress>99){resubscribeAllAnimates(true);resolve();}
resubscribeAllAnimates(false);}
logo=document.querySelector(".lazy.logo").contentDocument
function resubscribeAllAnimates(unsubscrubeOnly){animates=logo.querySelectorAll('[id="animateY"]');animates.forEach((animate)=>{animate.removeEventListener("endEvent",onAnimationEnd);if(!unsubscrubeOnly){animate.addEventListener("endEvent",onAnimationEnd);}});}
resubscribeAllAnimates(false);});}
function showBluePartAnimation(){return new Promise((resolve,reject)=>{let elapsedTime=(performance.now()-startTime)/1000;const logoDoc=document.querySelector(".lazy.logo").contentDocument;const bluePath=logoDoc.getElementById("bluePath");createSVGAnimation(bluePath,"animate","bluePathStroke","stroke-dashoffset",`1000`,`0`,`0.7s`,`${elapsedTime}s`,"spline","0.42 0 0.58 1");const blueFill=logoDoc.getElementById("blueFill");createSVGAnimation(blueFill,"animate","blueFillOpacity","fill-opacity",`0`,`1`,`0.3s`,`${elapsedTime + 0.7}s`);const bluePart=logoDoc.getElementById("bluePart");createSVGAnimation(bluePart,"animateTransform","animateScaleUp","transform","1 1","1.1 1.1","0.2s",`${elapsedTime + 1.2}s`,0,0,type="scale");createSVGAnimation(bluePart,"animateTransform","animateScaleDown","transform",`1.1 1.1`,`1 1`,`0.3s`,`${elapsedTime + 1.5}s`,0,0,type="scale");function onAnimationEnd(){resolve();}
const animateScaleDown=logoDoc.getElementById("animateScaleDown");animateScaleDown.addEventListener("endEvent",onAnimationEnd);console.log("waiting for animation of blue part to finish");});}
function createSVGAnimation(parentElement,newElementType,id,attributeName,from,to,duration,begin=0,calcMode=0,keySplines=0,type=0){const animate=document.createElementNS("http://www.w3.org/2000/svg",newElementType);animate.setAttribute("id",id);animate.setAttribute("attributeName",attributeName);if(calcMode){animate.setAttribute("calcMode",calcMode);}
if(keySplines){animate.setAttribute("keySplines",keySplines);}
if(type){animate.setAttribute("type",type);}
animate.setAttribute("from",from);animate.setAttribute("to",to);animate.setAttribute("dur",`${duration}`);animate.setAttribute("begin",`${begin}`);animate.setAttribute("fill","freeze");parentElement.appendChild(animate);return animate;}
function removeSlide(slide){return new Promise((resolve,reject)=>{if(!slide)return;slide.style.display="none";resolve();});}
function skipIntro(){const slides=document.querySelectorAll("body > [class*='-slide']");slides.forEach((slide)=>{removeSlide(slide);});const mainPage=document.querySelector(".main-page");const navbar=document.getElementById("mainNavbar");const roundButton=document.getElementById('round-center-button');const mainpageTextRows=mainPage.querySelectorAll(".text-row");document.body.style.backgroundColor="var(--text-light-color-hover)";incrementLocalStorageValue('skipIntro');if(mainPage){mainPage.style.display='block';mainPage.style.animation='none';mainPage.offsetHeight;mainPage.style.animation='showMainPage 10ms linear forwards, reduceHeightMainPage 10ms ease-out forwards';}
if(navbar){navbar.style.animation='none';navbar.offsetHeight;navbar.style.animation='moveDownNavBar 10ms ease-out 1 normal forwards';}
if(roundButton){roundButton.style.animation='none';roundButton.offsetHeight;roundButton.style.animation='fadeInButton 10ms ease-out 1 normal forwards';}
if(mainpageTextRows){mainpageTextRows.forEach(row=>{row.style.display='none';row.style.animation='none !important';row.style.transition='none !important';});}}
function initSprite(){return new Promise((resolve,reject)=>{const sprite=document.getElementById('sprite');const viewport=document.querySelector('.viewport');const img=document.querySelector('.viewport img');if(sprite.complete){resolve(createSpriteControler(sprite,viewport));}else{img.addEventListener("load",()=>{resolve(createSpriteControler(sprite,viewport));},{once:true});}});function createSpriteControler(sprite,viewport){const controller=new SpriteCover(sprite,viewport,sprite.naturalHeight,sprite.naturalHeight,textTimeline.length);return controller;}}
function startSlidesCycle(slidesSelector,spriteControler){function runSlideshow(){let currentIndex=0;const fourthslideText=document.querySelector('.fourth-slide .text-block h2 span');const fourthSlideTextColumn=document.querySelector('.slide-container.fourth-slide .text-column-fill')
let current=0;function nextFrame(spriteControler){console.log("current =",current);if(spriteControler){if(current>=textTimeline.length){console.log("nextFrame exit");return;}
console.log("current =",current);spriteControler.setFrame(current);current++;if(current<textTimeline.length){let delay=(textTimeline[current].time-textTimeline[current-1].time)*1000;setTimeout(()=>{nextFrame(spriteControler);},delay);}}}
fourthSlideTextColumn.addEventListener('animationend',(event)=>{if(event.animationName==='zoomInText'){nextFrame(spriteControler);}});}
function runIntroSlidesAnimation(){const animElements=document.querySelectorAll(".pending-animation:not(.animation)");animElements.forEach((elem)=>{console.log(`Starting animation for ${elem.classList}`);elem.classList.add("animation");});}
return new Promise((resolve,reject)=>{const slides=document.querySelectorAll(slidesSelector);slidesCount=slides.length;runIntroSlidesAnimation();runSlideshow();let resizeTimeout;window.addEventListener('resize',()=>{clearTimeout(resizeTimeout);resizeTimeout=setTimeout(calcTextRows,100);});calcTextRows();if(slidesCount){slides.forEach((slide)=>{console.log(`subscribing slide for animationend ${slide.classList}`)
slide.addEventListener('animationend',(event)=>{if(event.animationName==='showHideSlide'){console.log(`Ð—Ð°Ð²ÐµÑ€ÑˆÐµÐ½Ð° Ð°Ð½Ð¸Ð¼Ð°Ñ†Ð¸Ñ ÑÐºÑ€Ñ‹Ñ‚Ð¸Ñ ÑÐ»Ð°Ð¹Ð´Ð° ${slide.classList}`);removeSlide(slide);slidesCount--;console.log("slidesCount = ",slidesCount);if(!slidesCount){resolve();}}});});}
else{reject("no intro slides flound");}});}
function fitTextToContainer(containerSelector){const container=document.querySelector(containerSelector);if(!container){return;}
const rows=Array.from(container.querySelectorAll(".text-row"));const containerWidth=container.offsetWidth;const containerHeight=container.offsetHeight;let currentWidth=containerWidth;let lastWidth=currentWidth;let iterations=0;let fittedRows=null;const MAX_ITERATIONS=10;const MIN_WIDTH=100;const MAX_WIDTH=containerWidth*1;function cleanupFitty(instances){instances?.forEach(instance=>instance?.unsubscribe());}
function updateTextAndCheckHeight(){if(iterations>=MAX_ITERATIONS||currentWidth<MIN_WIDTH){return;}
function setTransformOriginToLetter(container,letter){const rows=Array.from(container.querySelectorAll('.text-row'));let totalOffsetY=0;for(const row of rows){if(row.textContent.includes('Ð²Ð¿ÐµÑ‡Ð°Ñ‚Ð»ÐµÐ½Ð¸Ð¹')){const letterIndex=row.textContent.indexOf(letter);if(letterIndex===-1){totalOffsetY+=row.getBoundingClientRect().height;continue;}
const range=document.createRange();const textNode=row.firstChild;range.setStart(textNode,letterIndex);range.setEnd(textNode,letterIndex+1);const rect=range.getBoundingClientRect();const parentRect=container.parentElement.getBoundingClientRect();const originX=rect.left-parentRect.left+(rect.width/2);const originY=rect.top-parentRect.top+(rect.height/2);container.parentElement.style.transformOrigin=`${originX}px ${originY}px`;break;}
totalOffsetY+=row.getBoundingClientRect().height;}}
cleanupFitty(fittedRows);fittedRows=rows.map((row,index)=>{return fitty(row);});requestAnimationFrame(()=>{const totalHeight=rows.reduce((sum,row)=>sum+row.scrollHeight,0);if(totalHeight>containerHeight){const scaleFactor=Math.max(0.6,containerHeight/totalHeight);currentWidth*=scaleFactor;currentWidth=Math.max(currentWidth,MIN_WIDTH);}else if(totalHeight<containerHeight*0.9){const scaleFactor=Math.min(1.4,(containerHeight*0.95)/totalHeight);currentWidth=Math.min(currentWidth*scaleFactor,MAX_WIDTH);}
if(Math.abs(currentWidth-lastWidth)>1){container.style.width=`${currentWidth}px`;lastWidth=currentWidth;iterations++;updateTextAndCheckHeight();}else if(containerSelector.includes("fourth-slide")){setTransformOriginToLetter(container,"Ñ‚");}});}
let beforeWidth=containerWidth;updateTextAndCheckHeight();requestAnimationFrame(()=>{setTimeout(()=>{let afterWidth=container.offsetWidth;},300)});}
function calcTextRows(){resizeTimeout=setTimeout(()=>{requestAnimationFrame(()=>{(async()=>{setTimeout(()=>fitTextToContainer('.text-column.second-slide'),100);setTimeout(()=>fitTextToContainer('.text-column.third-slide'),200);setTimeout(()=>fitTextToContainer('.text-column.fourth-slide'),300);setTimeout(()=>fitTextToContainer('.text-column.main-page'),400);})();});},100);return resizeTimeout;}
async function initLazyLoad(){return new Promise((resolve,reject)=>{const lazyLoad=new LazyLoad({elements_selector:".lazy-main",use_native:true,callback_enter:(element)=>{if(element.tagName==='VIDEO'){handleVideoLoad(element);}}});resolve(lazyLoad);});}
async function enableMainPage(){return new Promise((resolve,reject)=>{document.body.style.display='block';document.body.style.overflow='auto';resolve();});}
async function showMainPage(){return new Promise((resolve,reject)=>{const mainPage=document.querySelector(".main-page");document.body.style.backgroundColor="var(--text-light-color-hover)";if(mainPage){mainPage.style.display='block';}
setTimeout(()=>{adjustVimeoSize();},300);resolve();});}
function adjustVimeoSize(){const container=document.querySelector(".video-banner");const poster=document.querySelector(".video-banner .video-banner-poster");const iframe=container.querySelector("iframe");const player=new Vimeo.Player(iframe);console.log("adjustVimeoSize call");function resizeVideo(){player.getVideoWidth().then(videoWidth=>{return player.getVideoHeight().then(videoHeight=>{const containerWidth=container.offsetWidth;const containerHeight=container.offsetHeight;const containerAspectRatio=containerWidth/containerHeight;const videoAspectRatio=videoWidth/videoHeight;if(containerAspectRatio>videoAspectRatio){iframe.style.width="100%";iframe.style.height=`${containerWidth / videoAspectRatio}px`;}else{iframe.style.width=`${containerHeight * videoAspectRatio}px`;iframe.style.height="100%";}
iframe.style.top="50%";iframe.style.left="50%";iframe.style.transform="translate(-50%, -50%)";});});}
player.on("loaded",()=>{resizeVideo();});player.on("play",()=>{iframe.style.opacity="1";poster.style.display="none";resizeVideo();});window.addEventListener("resize",resizeVideo);mainPage=document.querySelector(".slide-container.main-page");if(mainPage){mainPage.addEventListener('animationend',(event)=>{if(event.animationName==='reduceHeightMainPage'){resizeVideo();}});}}
document.addEventListener('DOMContentLoaded',()=>{if(!startTime){startTime=performance.now();}
loadInto();const navbar=document.getElementById("mainNavbar");const videoBanner=document.querySelector(".video-banner");const toggler=document.querySelector('.navbar-toggler');const navbarmenu=document.querySelector('.navbar-collapse');const navbarCollapse=document.getElementById('navbarToggler');const roundButton=document.getElementById('round-center-button');window.addEventListener('scroll',updateScrolledGradient);window.addEventListener('scroll',closeMenu);if(navbarCollapse){navbarCollapse.addEventListener('show.bs.collapse',hideRoundButton);navbarCollapse.addEventListener('hide.bs.collapse',showRoundButton);}
function updateScrolledGradient(){const videoBannerHeight=videoBanner?videoBanner.offsetHeight:50;if(navbar){if(window.scrollY>videoBannerHeight){navbar.classList.add("scrolled");}else{navbar.classList.remove("scrolled");navbarCollapse.classList.remove("show");}}}
function showRoundButton(){roundButton.classList.add('show');roundButton.classList.remove('hide');}
function hideRoundButton(){roundButton.classList.remove('show');roundButton.classList.add('hide');}
function closeMenu(){if(navbarmenu){navbarmenu.classList.remove('show');}
toggler.setAttribute('aria-expanded','false');}
const navLinks=document.querySelectorAll('#country-tabs .nav-link');const cards=document.querySelectorAll('.card-column[data-country]');const offersSection=document.getElementById("offers");function getSelectedCoutry(){const activeNavLink=document.querySelector('#country-tabs .nav-link.active');if(activeNavLink){return activeNavLink.dataset.country;}
return null;}
function activateTabByHash(hash){const country=decodeURIComponent(hash.replace("#",""));console.log("ÐÐºÑ‚Ð¸Ð²Ð¸Ñ€ÑƒÐµÐ¼ Ñ‚Ð°Ð±:",country);const targetTab=[...navLinks].find(link=>{return new URL(link.href).hash.replace("#","")===country;});if(targetTab){targetTab.click();}}
function filterOffersByCountry(countryName){cards.forEach(card=>{if(card.dataset.country===countryName){card.classList.add("show");}
else{card.classList.remove("show");}});}
function isElementInViewport(el){const rect=el.getBoundingClientRect();return(rect.top<window.innerHeight&&rect.bottom>0);}
navLinks.forEach(link=>{link.addEventListener('click',(e)=>{e.preventDefault();navLinks.forEach(nav=>nav.classList.remove('active'));link.classList.add('active');filterOffersByCountry(getSelectedCoutry());const country=link.getAttribute("href").replace("#","");history.pushState(null,null,`#${encodeURIComponent(country)}`);setTimeout(()=>{if(!isElementInViewport(offersSection)){offersSection.scrollIntoView({behavior:"smooth",block:"start"});}},100);});});filterOffersByCountry(getSelectedCoutry());if(window.location.hash){const hashCountry=decodeURIComponent(window.location.hash.substring(1));activateTabByHash(hashCountry);}
window.addEventListener('popstate',function(event){if(window.location.hash){activateTabByHash(window.location.hash);}});const messageInput=document.getElementById("message-text");const messengerButtons=document.querySelectorAll("button[data-messenger]");const sendMsgModal=document.getElementById('messageModal');function updateButtonState(){const isMessageEmpty=messageInput.value.trim()==="";messengerButtons.forEach(button=>button.disabled=isMessageEmpty);}
function autoResize(event){setTimeout(()=>{const textarea=event?event.target:messageInput;textarea.style.height='auto';textarea.style.height=textarea.scrollHeight+'px';console.log("textarea.style.height =",textarea.style.height);},300);}
messageInput.addEventListener('input',autoResize);messageInput.addEventListener("input",updateButtonState);messengerButtons.forEach(button=>{button.addEventListener("click",function(){const messenger=this.dataset.messenger;const message=encodeURIComponent(messageInput.value.trim());let link="";if(messenger==="wa"){link=`https://wa.me/79219157157?text=${message}`;}else if(messenger==="tg"){link=`https://t.me/bolkoff?&text=${message}`;}
if(link){let modal=bootstrap.Modal.getInstance(sendMsgModal);if(modal)modal.hide();window.open(link,"_blank");}});});updateButtonState();if(sendMsgModal){sendMsgModal.addEventListener('show.bs.modal',event=>{const button=event.relatedTarget
const message=button.getAttribute('data-bs-message')
const messageInput=sendMsgModal.querySelector('#message-text')
messageInput.value=message;updateButtonState();autoResize();});}
const boxes=document.querySelectorAll('.fade-in');const observer=new IntersectionObserver((entries,observer)=>{entries.forEach(entry=>{if(entry.isIntersecting){entry.target.classList.add('visible');observer.unobserve(entry.target);}});},{threshold:0.2});boxes.forEach(box=>{observer.observe(box);});});const scrollLeft=document.getElementById('scrollLeft');const scrollRight=document.getElementById('scrollRight');const wrapper=document.getElementById('inspirationGallery');if(scrollLeft&&scrollRight){function updateButtonVisibility(){scrollLeft.disabled=wrapper.scrollLeft===0;scrollRight.disabled=wrapper.scrollLeft+wrapper.offsetWidth>=wrapper.scrollWidth;}
scrollLeft.addEventListener('click',()=>{const elementWidth=getVisibleElementWidth(wrapper,'left');wrapper.scrollBy({left:-elementWidth,behavior:'smooth'});setTimeout(updateButtonVisibility,300);});scrollRight.addEventListener('click',()=>{const elementWidth=getVisibleElementWidth(wrapper,'right');wrapper.scrollBy({left:elementWidth,behavior:'smooth'});setTimeout(updateButtonVisibility,300);});window.addEventListener('resize',updateButtonVisibility);wrapper.addEventListener('scroll',updateButtonVisibility);updateButtonVisibility();function getVisibleElementWidth(wrapper,direction){const children=wrapper.children;const wrapperRect=wrapper.getBoundingClientRect();for(let i=0;i<children.length;i++){const child=children[i];const childRect=child.getBoundingClientRect();if(direction==='left'&&childRect.right>wrapperRect.left){return Math.min(childRect.right-wrapperRect.left,child.offsetWidth);}
if(direction==='right'&&childRect.left<wrapperRect.right){return Math.min(wrapperRect.right-childRect.left,child.offsetWidth);}}
return 300;}}
const reviews=[{id:1,name:"Ð›ÑŽÐ±Ð¾Ð²ÑŒ",avatar:"images/review_avatar_1_thumb@1x.avif",text:"Ð’Ð¾Ñ‚ ÑƒÐ¶Ðµ Ð±Ð¾Ð»ÑŒÑˆÐµ 10 Ð»ÐµÑ‚ Ð¿ÑƒÑ‚ÐµÑˆÐµÑÑ‚Ð²ÑƒÐµÐ¼ ÑÐµÐ¼ÑŒÐµÐ¹ Ñ‚Ð¾Ð»ÑŒÐºÐ¾ Ð¿Ð¾ Ñ€ÐµÐºÐ¾Ð¼ÐµÐ½Ð´Ð°Ñ†Ð¸ÑÐ¼ ÐœÐ°ÑˆÐ¸. Ð¯ ÑÐ»Ð¾Ð¶Ð½Ð¾Ð¹ Ð¸ ÑÐ°Ð¼Ñ‹Ð¹ ÐºÐ°Ð¿Ñ€Ð¸Ð·Ð½Ñ‹Ð¹ ÐºÐ»Ð¸ÐµÐ½Ñ‚. ÐœÐ¾Ð³Ñƒ Ð¾Ñ‡ÐµÐ½ÑŒ Ð´Ð¾Ð»Ð³Ð¾ Ð²Ñ‹Ð±Ð¸Ñ€Ð°Ñ‚ÑŒ Ð¾Ñ‚ÐµÐ»ÑŒ Ð¸ Ð·Ð°Ð´Ð°Ð²Ð°Ñ‚ÑŒ ÐºÑƒÑ‡Ñƒ Ð²Ð¾Ð¿Ñ€Ð¾ÑÐ¾Ð². Ð¢ÐµÑ€Ð¿ÐµÐ½Ð¸ÑŽ ÐœÐ°ÑˆÐ¸ Ð¼Ð¾Ð¶Ð½Ð¾ Ð¿Ð¾Ð·Ð°Ð²Ð¸Ð´Ð¾Ð²Ð°Ñ‚ÑŒ, Ð²ÑÐµÐ³Ð´Ð° Ð½Ð°Ð¹Ð´ÐµÑ‚ Ð²Ð°Ñ€Ð¸Ð°Ð½Ñ‚, ÐºÐ¾Ñ‚Ð¾Ñ€Ñ‹Ð¹ Ð¼ÐµÐ½Ñ ÑƒÑÑ‚Ñ€Ð¾Ð¸Ñ‚. ÐœÑ‹ Ð»ÐµÑ‚Ð°Ð»Ð¸ Ð¢ÑƒÑ€Ñ†Ð¸ÑŽ, Ð•Ð³Ð¸Ð¿ÐµÑ‚, Ð”Ð¾Ð¼Ð¸Ð½Ð¸ÐºÐ°Ð½Ñƒ, ÐœÐµÐºÑÐ¸ÐºÑƒ, ÐœÐ°Ð²Ñ€Ð¸ÐºÐ¸Ð¹, Ð¢Ð°Ð¸Ð»Ð°Ð½Ð´. ÐœÐ½Ðµ Ð½Ñ€Ð°Ð²Ð¸Ñ‚ÑÑ Ñ‡Ñ‚Ð¾ ÐœÐ°ÑˆÐ° Ð»ÐµÐ³ÐºÐ¾ Ð¾Ñ€Ð¸ÐµÐ½Ñ‚Ð¸Ñ€ÑƒÐµÑ‚ÑÑ Ð² Ð±Ð¾Ð»ÑŒÑˆÐ¾Ð¼ ÐºÐ¾Ð»Ð¸Ñ‡ÐµÑÑ‚Ð²Ðµ Ð½Ð°Ð¿Ñ€Ð°Ð²Ð»ÐµÐ½Ð¸Ð¹ Ð¸ Ñ Ð»ÐµÐ³ÐºÐ¾ÑÑ‚ÑŒÑŽ Ð¼Ð¾Ð¶ÐµÑ‚ Ñ€Ð°ÑÑÐºÐ°Ð·Ð°Ñ‚ÑŒ Ð¾Ð± Ð¾ÑÐ¾Ð±ÐµÐ½Ð½Ð¾ÑÑ‚ÑÑ… ÑÑ‚Ñ€Ð°Ð½Ñ‹, ÑÐµÐ·Ð¾Ð½Ð½Ð¾ÑÑ‚Ð¸, Ð´Ð¾ÑÑ‚Ð¾Ð¿Ñ€Ð¸Ð¼ÐµÑ‡Ð°Ñ‚ÐµÐ»ÑŒÐ½Ð¾ÑÑ‚ÑÑ….",tripDescription:"ÐœÐµÐºÑÐ¸ÐºÐ°, ÐœÐ°Ð²Ñ€Ð¸ÐºÐ¸Ð¹, Ð•Ð³Ð¸Ð¿ÐµÑ‚, Ð¢ÑƒÑ€Ñ†Ð¸Ñ",socialPlatform:"instagram",socialLink:"https://www.instagram.com/luba.borovkova"},{id:2,name:"Ð¢Ð°Ñ‚ÑŒÑÐ½Ð°",avatar:"images/review_avatar_2_thumb@1x.avif",text:"ÐšÐ°Ð¶Ð´Ð°Ñ Ð¿Ð¾ÐµÐ·Ð´ÐºÐ° Ð½Ð°Ñ‡Ð¸Ð½Ð°ÐµÑ‚ÑÑ Ñ ÑÐ¸Ð»ÑŒÐ½Ñ‹Ñ… Ñ€Ð°Ð·Ð½Ð¾Ð³Ð»Ð°ÑÐ¸Ð¹ Ð² ÑÐµÐ¼ÑŒÐµ, Ñƒ Ð¼ÑƒÐ¶Ð° Ð³Ð¾Ñ€Ñ‹, Ñƒ Ð¼ÐµÐ½Ñ Ð¼Ð¾Ñ€Ðµ. Ð£ Ð¼ÐµÐ½Ñ 5 Ð·Ð²ÐµÐ·Ð´, Ñƒ Ð¼ÑƒÐ¶Ð° Ð¼Ð°ÐºÑÐ¸Ð¼ÑƒÐ¼ 4, Ð½Ð¾ ÑÐ¿Ð°ÑÐ¸Ð±Ð¾ ÐœÐ°Ñ€Ð¸Ð¸ Ð¾Ð½Ð° Ð¼Ð¾Ð¶ÐµÑ‚ Ð´ÐµÐ»Ð¸ÐºÐ°Ñ‚Ð½Ð¾ ÑÐºÐ»Ð¾Ð½Ð¸Ñ‚ÑŒ Ð¼Ð¾ÐµÐ³Ð¾ Ð¼ÑƒÐ¶Ð° Ð² Ð½ÑƒÐ¶Ð½Ð¾Ð¼ Ð´Ð»Ñ Ð¼ÐµÐ½Ñ Ð¾Ñ‚Ð¿ÑƒÑÐºÐ½Ð¾Ð¼ Ð½Ð°Ð¿Ñ€Ð°Ð²Ð»ÐµÐ½Ð¸Ð¸ ðŸ˜„ðŸ‘ŒðŸ»Ð”ÐµÐ²Ð¾Ñ‡ÐºÐ¸, Ð½Ð°Ð´ÐµÑŽÑÑŒ Ð²Ñ‹ Ð¿Ð¾Ð½Ð¸Ð¼Ð°ÐµÑ‚Ðµ, Ñ‡Ñ‚Ð¾ ÑÑ‚Ð¾ Ð±ÐµÑÑ†ÐµÐ½Ð½Ð¾? ðŸ˜‚  Ð˜ Ð´Ð°, ÑÐµÐ¼ÑŒÑ Ð¿Ð¾ÐºÐ° Ð´ÐµÑ€Ð¶Ð¸Ñ‚ÑÑ, Ð¾Ð¿ÑÑ‚ÑŒ Ñ‚Ð°ÐºÐ¸ ÑÐ¿Ð°ÑÐ¸Ð±Ð¾ ÐºÐ¾Ð¼Ñƒ? Ð¡Ð¿Ð°ÑÐ¸Ð±Ð¾ ÐœÐ°Ñ€Ð¸Ð¸ â£ï¸ðŸ˜šâ£ï¸",tripDescription:"Ð¨Ñ€Ð¸ Ð›Ð°Ð½ÐºÐ°, ÐœÐ°Ð»ÑŒÐ´Ð¸Ð²Ñ‹, ÐšÐ¸Ñ‚Ð°Ð¹, ÐžÐÐ­",socialPlatform:"instagram",socialLink:"https://www.instagram.com/design_levina"},{id:3,name:"ÐÐ½Ð°ÑÑ‚Ð°ÑÐ¸Ñ",avatar:"images/review_avatar_3_thumb@1x.avif",text:"Ð¥Ð¾Ñ‡Ñƒ Ð¿Ð¾Ð´ÐµÐ»Ð¸Ñ‚ÑŒÑÑ ÑÐ²Ð¾Ð¸Ð¼Ð¸ Ð²Ð¿ÐµÑ‡Ð°Ñ‚Ð»ÐµÐ½Ð¸ÑÐ¼Ð¸ Ð¾ Ð´Ð¾Ð»Ð³Ð¾Ð»ÐµÑ‚Ð½ÐµÐ¼ ÑÐ¾Ñ‚Ñ€ÑƒÐ´Ð½Ð¸Ñ‡ÐµÑÑ‚Ð²Ðµ Ñ ÐœÐ°Ñ€Ð¸ÐµÐ¹. Ð¡ ÐœÐ°ÑˆÐµÐ¹ Ð¼Ñ‹ ÑƒÐ¶Ðµ Ð¾Ñ‚Ð´Ñ‹Ñ…Ð°ÐµÐ¼ Ð±Ð¾Ð»ÑŒÑˆÐµ Ð¿ÑÑ‚Ð½Ð°Ð´Ñ†Ð°Ñ‚Ð¸ Ð»ÐµÑ‚, Ð¿Ð¸ÑˆÑƒ Ð¸Ð¼ÐµÐ½Ð½Ð¾ Ð¾Ñ‚Ð´Ñ‹Ñ…Ð°ÐµÐ¼, Ñ‚Ð°Ðº ÐºÐ°Ðº ÐœÐ°ÑˆÐ° ÐºÐ°Ð¶Ð´Ñ‹Ð¹ Ð½Ð°Ñˆ Ð¾Ñ‚Ð¿ÑƒÑÐº Ð²ÑÐµÐ³Ð´Ð° Ð½Ð° ÑÐ²ÑÐ·Ð¸. Ð’ÑÐµ Ð²Ð¾Ð·Ð½Ð¸ÐºÐ°ÑŽÑ‰Ð¸Ðµ Ð²Ð¾Ð¿Ñ€Ð¾ÑÑ‹ Ð¸ Ð¿Ñ€Ð¾Ð±Ð»ÐµÐ¼Ñ‹ Ñ€ÐµÑˆÐ°ÑŽÑ‚ÑÑ Ð½Ð°ÑˆÐµÐ¹ Ñ„ÐµÐµÐ¹ Ð¼Ð³Ð½Ð¾Ð²ÐµÐ½Ð½Ð¾. ÐœÐ°ÑˆÐ° Ð²ÑÐµÐ³Ð´Ð° Ð¿Ñ€Ð¸ÑÐ»ÑƒÑˆÐ¸Ð²Ð°ÐµÑ‚ÑÑ Ðº Ð½Ð°ÑˆÐ¸Ð¼ Ð¿Ð¾Ð¶ÐµÐ»Ð°Ð½Ð¸ÑÐ¼ Ð¸ Ð¿Ð¾Ð´Ð±Ð¸Ñ€Ð°ÐµÑ‚ Ð¸Ð´ÐµÐ°Ð»ÑŒÐ½Ñ‹Ðµ Ð²Ð°Ñ€Ð¸Ð°Ð½Ñ‚Ñ‹ Ð´Ð»Ñ Ð½Ð°Ñ. Ð’ÑÐµÐ¼ ÑÐ²Ð¾Ð¸Ð¼ Ð´Ñ€ÑƒÐ·ÑŒÑÐ¼ Ð´Ð°Ð²Ð½Ð¾ ÑƒÐ¶Ðµ Ñ€ÐµÐºÐ¾Ð¼ÐµÐ½Ð´Ð¾Ð²Ð°Ð»Ð° ÐœÐ°Ñ€Ð¸ÑŽ, ÐºÐ°Ðº ÑÐ°Ð¼Ð¾Ð³Ð¾ Ñ‡ÑƒÑ‚ÐºÐ¾Ð³Ð¾ ,Ð¾Ñ‚Ð²ÐµÑ‚ÑÑ‚Ð²ÐµÐ½Ð½Ð¾Ð³Ð¾, Ñ‡ÐµÑÑ‚Ð½Ð¾Ð³Ð¾ Ð°Ð³ÐµÐ½Ñ‚Ð°, Ð´Ð° Ð¸ Ð¿Ñ€Ð¾ÑÑ‚Ð¾, ÐºÐ°Ðº Ð¿Ñ€ÐµÐºÑ€Ð°ÑÐ½ÑƒÑŽ Ð´ÐµÐ²ÑƒÑˆÐºÑƒ. Ð¡Ð¿Ð°ÑÐ¸Ð±Ð¾ ÐœÐ°ÑˆÐ°, Ð²Ð¿ÐµÑ€ÐµÐ´Ð¸ Ñƒ Ð½Ð°Ñ ÐµÑ‰Ðµ Ð¼Ð½Ð¾Ð³Ð¾ Ð¿ÑƒÑ‚ÐµÑˆÐµÑÑ‚Ð²Ð¸Ð¹!",tripDescription:"Ð•Ð³Ð¸Ð¿ÐµÑ‚, ÐœÐ°Ð»ÑŒÐ´Ð¸Ð²Ñ‹, Ð¢Ð°Ð¸Ð»Ð°Ð½Ð´, Ð‘Ð°Ð»Ð¸, ÐšÐ¸Ñ‚Ð°Ð¹, Ð“Ð¾Ð½ÐºÐ¾Ð½Ð³, ÐžÐÐ­",socialPlatform:"instagram",socialLink:"https://www.instagram.com/nastyshadiamond"},{id:4,name:"Ð¡Ð²ÐµÑ‚Ð»Ð°Ð½Ð°",avatar:"images/review_avatar_4_thumb@1x.avif",text:"Ð¯ Ð¾Ñ‡ÐµÐ½ÑŒ Ð±Ð»Ð°Ð³Ð¾Ð´Ð°Ñ€Ð½Ð° Ñ‚ÑƒÑ€Ð°Ð³ÐµÐ½Ñ‚ÑÑ‚Ð²Ñƒ Â«Ð­Ð»ÐµÐ¼ÐµÐ½Ñ‚ Ñ‚Ñ€ÐµÐ²ÐµÐ»Â» Ð·Ð° Ð¾Ñ€Ð³Ð°Ð½Ð¸Ð·Ð°Ñ†Ð¸ÑŽ Ð¼Ð¾ÐµÐ³Ð¾ Ð¾Ñ‚Ð´Ñ‹Ñ…Ð°. Ð£Ð¶Ðµ Ð½Ð° Ð¿Ñ€Ð¾Ñ‚ÑÐ¶ÐµÐ½Ð¸Ð¸ Ð½ÐµÑÐºÐ¾Ð»ÑŒÐºÐ¸Ñ… Ð»ÐµÑ‚ Ð¼Ð½Ðµ Ð¸ Ð¼Ð¾ÐµÐ¹ ÑÐµÐ¼ÑŒÐµ Ð¿Ð¾Ð¼Ð¾Ð³Ð°ÑŽÑ‚ Ð² Ð¿Ð¾Ð´Ð±Ð¾Ñ€Ðµ Ñ‚ÑƒÑ€Ð°, Ð²ÑÐµÐ³Ð´Ð° Ð¾Ð¿ÐµÑ€Ð°Ñ‚Ð¸Ð²Ð½Ð¾ Ð¾Ñ‚Ð²ÐµÑ‡Ð°ÑŽÑ‚ Ð½Ð° Ð·Ð°Ð¿Ñ€Ð¾ÑÑ‹, Ð¿Ð¾Ð´Ð±Ð¸Ñ€Ð°ÑŽÑ‚ ÑƒÐ´Ð¾Ð±Ð½Ñ‹Ðµ Ð¼Ð½Ðµ Ð²Ð°Ñ€Ð¸Ð°Ð½Ñ‚Ñ‹ Ð¿Ð¾ Ð±ÑŽÐ´Ð¶ÐµÑ‚Ñƒ Ð¸ Ð²Ñ€ÐµÐ¼ÐµÐ½Ð¸. Ð’ÑÐµÐ³Ð´Ð° Ð½Ð° ÑÐ²ÑÐ·Ð¸ Ð¸ ÑÐ²Ð¾ÐµÐ²Ñ€ÐµÐ¼ÐµÐ½Ð½Ð¾ Ð¿Ð¾Ð¼Ð¾Ð³Ð°ÑŽÑ‚ Ñ Ñ€Ð°Ð·Ð½Ñ‹Ð¼Ð¸ Ð¾Ñ€Ð³Ð°Ð½Ð¸Ð·Ð°Ñ†Ð¸Ð¾Ð½Ð½Ñ‹Ð¼Ð¸ Ð²Ð¾Ð¿Ñ€Ð¾ÑÐ°Ð¼Ð¸. ÐŸÑ€Ð¾Ð²Ð¾Ð´ÑÑ‚ Ð¾Ð³Ñ€Ð¾Ð¼Ð½ÑƒÑŽ Ñ€Ð°Ð±Ð¾Ñ‚Ñƒ Ð¿Ð¾ Ð¿Ð¾Ð´Ð±Ð¾Ñ€Ñƒ Ñ‚ÑƒÑ€Ð°, Ð¿Ñ€Ð¸Ñ‡ÐµÐ¼ Ð´ÐµÐ»Ð°ÑŽÑ‚ ÑÑ‚Ð¾ Ð² ÑƒÐ´Ð¾Ð±Ð½Ð¾Ðµ Ð´Ð»Ñ Ð¼ÐµÐ½Ñ Ð²Ñ€ÐµÐ¼Ñ, Ð´Ð°Ð»ÐµÐºÐ¾ Ð½ÐµÑ€Ð°Ð±Ð¾Ñ‡ÐµÐµ Ð´Ð»Ñ Ð±Ð¾Ð»ÑŒÑˆÐ¸Ð½ÑÑ‚Ð²Ð° Ð»ÑŽÐ´ÐµÐ¹. Ð¢ÐµÑ€Ð¿ÐµÐ»Ð¸Ð²Ð¾ Ð¾Ñ‚Ð²ÐµÑ‡Ð°ÑŽÑ‚ Ð½Ð° Ð²ÑÐµ Ð²Ð¾Ð¿Ñ€Ð¾ÑÑ‹, Ð³Ñ€Ð°Ð¼Ð¾Ñ‚Ð½Ð¾ Ñ€Ð°Ð·Ð²ÐµÐ¸Ð²Ð°ÑŽÑ‚ Ð¼Ð¾Ð¸ ÑÐ¾Ð¼Ð½ÐµÐ½Ð¸Ñ, ÑÑ‚Ð°Ñ€Ð°ÑŽÑ‚ÑÑ ÑƒÑ‡ÐµÑÑ‚ÑŒ Ð²ÑÐµ Ð¿Ð¾Ð¶ÐµÐ»Ð°Ð½Ð¸Ñ, Ð¿Ð¾Ð¼Ð¾Ð³Ð°ÑŽÑ‚ Ð·Ð°Ñ€ÐµÐ³Ð¸ÑÑ‚Ñ€Ð¸Ñ€Ð¾Ð²Ð°Ñ‚ÑŒÑÑ Ð½Ð° Ñ€ÐµÐ¹Ñ, ÑÐ¿Ð¾ÑÐ¾Ð±ÑÑ‚Ð²ÑƒÑŽÑ‚ Ð±Ñ‹ÑÑ‚Ñ€Ð¾Ð¼Ñƒ Ñ€Ð°Ð·Ð¼ÐµÑ‰ÐµÐ½Ð¸ÑŽ Ð² Ð¾Ñ‚ÐµÐ»Ðµ. ÐŸÑ€Ð¸Ð·Ð½Ð°Ñ‚ÐµÐ»ÑŒÐ½Ð° Ð·Ð° Ð½ÐµÑ€Ð°Ð²Ð½Ð¾Ð´ÑƒÑˆÐ¸Ðµ Ð¸ Ð¾Ð±ÑÐ·Ð°Ñ‚ÐµÐ»ÑŒÐ½Ð¾ Ð±ÑƒÐ´Ñƒ Ñ€ÐµÐºÐ¾Ð¼ÐµÐ½Ð´Ð¾Ð²Ð°Ñ‚ÑŒ Ð´Ð°Ð½Ð½Ð¾Ðµ Ñ‚ÑƒÑ€Ð°Ð³ÐµÐ½Ñ‚ÑÑ‚Ð²Ð¾!",tripDescription:"ÐœÐ°Ð»ÑŒÐ´Ð¸Ð²Ñ‹, Ð•Ð³Ð¸Ð¿ÐµÑ‚, Ð¢ÑƒÑ€Ñ†Ð¸Ñ, ÐžÐÐ­",socialPlatform:"instagram",socialLink:"https://www.instagram.com/svetlanapashchenco"},{id:5,name:"ÐœÐ°Ñ€Ð¸Ð½Ð°",avatar:"images/review_avatar_5_thumb@1x.avif",text:"Ð¥Ð¾Ñ‡Ñƒ Ð¿Ð¾Ð´ÐµÐ»Ð¸Ñ‚ÑŒÑÑ Ð²Ð¿ÐµÑ‡Ð°Ñ‚Ð»ÐµÐ½Ð¸ÑÐ¼Ð¸ Ð¾ ÑÐ²Ð¾Ð¸Ñ… Ð·Ð°Ð¼ÐµÑ‡Ð°Ñ‚ÐµÐ»ÑŒÐ½Ñ‹Ñ… Ð¿Ð¾ÐµÐ·Ð´ÐºÐ°Ñ…, ÐºÐ¾Ñ‚Ð¾Ñ€Ñ‹Ðµ Ð½Ð°Ð¼ Ð¾Ñ€Ð³Ð°Ð½Ð¸Ð·Ð¾Ð²Ð°Ð»Ð° ÐœÐ°Ñ€Ð¸Ñ Ðš. Ð”Ð°Ð¶Ðµ Ð¿Ð¾ÑÐµÑ‚Ð¸Ð² Ð½Ð°Ñˆ Ð»ÑŽÐ±Ð¸Ð¼Ñ‹Ð¹ Ð¾Ñ‚ÐµÐ»ÑŒ Ð² Ð¢ÑƒÑ€Ñ†Ð¸Ð¸, Ð½Ð¾ Ð² Ð¿ÐµÑ€Ð²Ñ‹Ð¹ Ñ€Ð°Ð· Ñ ÐµÐµ Ð¿Ð¾Ð¼Ð¾Ñ‰ÑŒÑŽ ÑÑ€Ð°Ð·Ñƒ Ð·Ð°Ð¼ÐµÑ‚Ð¸Ð»Ð¸ Ñ€Ð°Ð·Ð½Ð¸Ñ†Ñƒ. Ð‘Ñ‹Ð» Ð¿Ñ€ÐµÐ´Ð»Ð¾Ð¶ÐµÐ½ Ð¸ Ð·Ð°ÐºÐ°Ð·Ð°Ð½ Ð¸Ð½Ð´Ð¸Ð²Ð¸Ð´ÑƒÐ°Ð»ÑŒÐ½Ñ‹Ð¹ Ñ‚Ñ€Ð°Ð½ÑÑ„ÐµÑ€, Ð²Ñ‹Ð±Ñ€Ð°Ð½Ñ‹ Ð¼ÐµÑÑ‚Ð° Ð² ÑÐ°Ð¼Ð¾Ð»ÐµÑ‚Ðµ, Ð¾Ñ‚ÐµÐ»ÑŒ Ð±Ñ‹Ð» Ð¿Ñ€ÐµÐ´ÑƒÐ¿Ñ€ÐµÐ¶Ð´ÐµÐ½, Ñ‡Ñ‚Ð¾ Ð¼Ñ‹ Ð¿Ð¾ÑÑ‚Ð¾ÑÐ½Ð½Ñ‹Ðµ Ð³Ð¾ÑÑ‚Ð¸. ÐžÑ‚Ð´Ñ‹Ñ… Ð½Ð°Ñ‡Ð°Ð»ÑÑ ÐµÑ‰Ðµ Ñ ÑÐ°Ð¼Ð¾Ð³Ð¾ Ð²Ñ‹Ð»ÐµÑ‚Ð°. Ð’ Ð¾ÑÑ‚Ð°Ð»ÑŒÐ½Ñ‹Ñ… Ð¿Ð¾ÐµÐ·Ð´ÐºÐ°Ñ… Ð¼Ñ‹ ÑƒÐ¶Ðµ Ð¿Ð¾Ð»Ð½Ð¾ÑÑ‚ÑŒÑŽ Ð´Ð¾Ð²ÐµÑ€Ð¸Ð»Ð¸ÑÑŒ Ð² Ñ€ÑƒÐºÐ¸ Ð¿Ñ€Ð¾Ñ„ÐµÑÑÐ¸Ð¾Ð½Ð°Ð»Ð° Ð¸ Ð¿Ñ€Ð¾ÑÑ‚Ð¾ Ð½Ð°ÑÐ»Ð°Ð¶Ð´Ð°Ð»Ð¸ÑÑŒ Ð½Ð¾Ð²Ñ‹Ð¼Ð¸ Ð²Ð¿ÐµÑ‡Ð°Ñ‚Ð»ÐµÐ½Ð¸ÑÐ¼Ð¸ Ð¾Ñ‚ Ð”ÑƒÐ±Ð°Ñ Ð¸ Ð¿Ñ€ÐµÐºÑ€Ð°ÑÐ½Ñ‹Ð¼ Ð¾Ñ‚ÐµÐ»ÐµÐ¼ JA PALM TREE COURT. ÐœÐ°Ñ€Ð¸Ñ Ð¿Ñ€ÐµÐ´Ð»Ð¾Ð¶Ð¸Ð»Ð° ÑÐ°Ð¼Ñ‹Ð¹ ÐºÐ¾Ð¼Ñ„Ð¾Ñ€Ñ‚Ð½Ñ‹Ð¹ Ð´Ð»Ñ Ð½Ð°Ñ Ð¿ÐµÑ€ÐµÐ»ÐµÑ‚, Ð´Ð¾Ð³Ð¾Ð²Ð¾Ñ€Ð¸Ð»Ð°ÑÑŒ Ñ Ð¾Ñ‚ÐµÐ»ÐµÐ¼ Ð¾ Ñ€Ð°Ð½Ð½ÐµÐ¼ Ð·Ð°ÑÐµÐ»ÐµÐ½Ð¸Ð¸ Ð² Ð¾Ñ‚ÐµÐ»ÑŒ, ÑƒÑ‡Ð»Ð° Ð½Ð°ÑˆÐ¸ Ð¿Ð¾Ð¶ÐµÐ»Ð°Ð½Ð¸Ñ Ð¾ Ð½Ð°Ð»Ð¸Ñ‡Ð¸Ð¸ ÑÐ¿Ð¾Ñ€Ñ‚Ð¸Ð²Ð½Ñ‹Ñ… Ð°ÐºÑ‚Ð¸Ð²Ð½Ð¾ÑÑ‚ÐµÐ¹. Ð¡ÐµÐ¹Ñ‡Ð°Ñ Ð¿Ð»Ð°Ð½Ð¸Ñ€ÑƒÐµÐ¼ Ð½Ð° Ð»ÐµÑ‚Ð¾ ÐºÑ€ÑƒÐ¸Ð· Ð¿Ð¾ Ð¡Ñ€ÐµÐ´Ð¸Ð·ÐµÐ¼Ð½Ð¾Ð¼Ñƒ Ð¼Ð¾Ñ€ÑŽ. Ð’ÐµÑ€ÑŽ, Ñ‡Ñ‚Ð¾ ÑÑ‚Ð¾ Ð±ÑƒÐ´ÐµÑ‚ Ð½ÐµÐ·Ð°Ð±Ñ‹Ð²Ð°ÐµÐ¼Ð¾!",tripDescription:"Ð¢ÑƒÑ€Ñ†Ð¸Ñ, Ð•Ð³Ð¸Ð¿ÐµÑ‚, ÐžÐÐ­",socialPlatform:"instagram",socialLink:"https://www.instagram.com/semavinamarina_artist"},{id:6,name:"Ð¡Ð²ÐµÑ‚Ð»Ð°Ð½Ð° ",avatar:"images/review_avatar_6_thumb@1x.avif",text:"Ð¡Ð¿Ð°ÑÐ¸Ð±Ð¾ Ð±Ð¾Ð»ÑŒÑˆÐ¾Ðµ ÐœÐ°Ñ€Ð¸Ð¸ Ð·Ð° Ð¾Ñ€Ð³Ð°Ð½Ð¸Ð·Ð°Ñ†Ð¸ÑŽ Ð½Ð°ÑˆÐµÐ³Ð¾ ÑÐµÐ¼ÐµÐ¹Ð½Ð¾Ð³Ð¾ Ð¾Ñ‚Ð´Ñ‹Ñ…Ð°. ÐžÐ±Ñ€Ð°Ñ‰Ð°ÐµÐ¼ÑÑ Ð½Ðµ Ð¿ÐµÑ€Ð²Ñ‹Ð¹ Ñ€Ð°Ð·, Ð¿Ð¾Ñ‚Ð¾Ð¼Ñƒ Ð¼Ð¾Ð¼ÐµÐ½Ñ‚ Ð²Ñ‹Ð±Ð¾Ñ€Ð° Ð¿Ñ€Ð¾Ñ…Ð¾Ð´Ð¸Ñ‚ Ð»ÐµÐ³ÐºÐ¾ Ð¸ Ð±Ñ‹ÑÑ‚Ñ€Ð¾, ÐœÐ°Ñ€Ð¸Ñ Ð²ÑÑ‘ Ð²Ñ€ÐµÐ¼Ñ Ð½Ð° ÑÐ²ÑÐ·Ð¸, Ð±Ñ‹ÑÑ‚Ñ€Ð¾ Ð¾Ñ‚Ð²ÐµÑ‡Ð°ÐµÑ‚ Ð½Ð° Ð²ÑÐµ Ð²Ð¾Ð¿Ñ€Ð¾ÑÑ‹, Ð¿Ð¾Ð¼Ð¾Ð³Ð°ÐµÑ‚ Ð²Ð¾ Ð²Ñ€ÐµÐ¼Ñ Ð¾Ñ‚Ð´Ñ‹Ñ…Ð°, ÐµÑÐ»Ð¸ Ð·Ð°Ñ…Ð¾Ñ‡ÐµÑ‚ÑÑ Ð´Ð¾Ð¿Ð¾Ð»Ð½Ð¸Ñ‚ÐµÐ»ÑŒÐ½Ñ‹Ñ… ÑƒÑÐ»ÑƒÐ³ Ð¸Ð»Ð¸ Ñ€Ð°Ð·Ð²Ð»ÐµÑ‡ÐµÐ½Ð¸Ð¹. ÐžÑ‡ÐµÐ½ÑŒ Ð´Ð¾Ð²Ð¾Ð»ÑŒÐ½Ñ‹ Ð½Ð°ÑˆÐ¸Ð¼ ÑÐ¾Ñ‚Ñ€ÑƒÐ´Ð½Ð¸Ñ‡ÐµÑÑ‚Ð²Ð¾Ð¼!",tripDescription:"ÐžÐÐ­, ÐœÐ°Ð²Ñ€Ð¸ÐºÐ¸Ð¹, ÐœÐ°Ð»ÑŒÐ´Ð¸Ð²Ñ‹, Ð¯Ð¿Ð¾Ð½Ð¸Ñ, Ð˜Ñ‚Ð°Ð»Ð¸Ñ, Ð¤Ñ€Ð°Ð½Ñ†Ð¸Ñ",socialPlatform:"instagram",socialLink:"https://www.instagram.com/svetaism"}];function getSocialIcon(platform){return platform==='instagram'?'<svg width="24"height="24"><use href="#ig"/></svg>':'<svg width="24"height="24"><use href="#ext_link"/></svg>';}
function createReviewCard(review){return`
      <div class="review-card rounded-4" data-review-id="${review.id}">
      <a href="${review.socialLink}" target="_blank" rel="noopener noreferrer" class="social-link">
        <div class="review-header">
          <img src="${review.avatar}" alt="${review.name}" class="avatar">
          <div class="review-info ms-2">
            <div class="name card-header-font p-0">${review.name}</div>
            <p class="trip-description regular-font p-0 m-0">${review.tripDescription}</p>
          </div>
          <div>
            ${getSocialIcon(review.socialPlatform)}
          </div>
        </div>
        </a>
        <p class="regular-font review-text" data-full-text="${review.text}"></p>
      </div>
    `;}
let currentIndex=0;function updateCounter(){const counter=document.getElementById('counter');counter.textContent=`${currentIndex + 1} / ${reviews.length}`;}
function getReviewsForDisplay(centerIndex){const result=[];const totalReviews=reviews.length;for(let i=-2;i<0;i++){let index=centerIndex+i;if(index<0)index=totalReviews+index;result.push(reviews[index]);}
result.push(reviews[centerIndex]);for(let i=1;i<=2;i++){let index=(centerIndex+i)%totalReviews;result.push(reviews[index]);}
return result;}
function scrollToReview(index,direction='next'){const container=document.getElementById('reviewsContainer');if(index<0)index=reviews.length-1;if(index>=reviews.length)index=0;const displayReviews=getReviewsForDisplay(index);container.innerHTML=displayReviews.map(review=>createReviewCard(review)).join('');const cards=container.querySelectorAll('.review-card');cards.forEach((card,i)=>{if(i===2)card.classList.add('active');else{let targetIndex=(index+i-2+reviews.length)%reviews.length;card.addEventListener("click",()=>{scrollToReview(targetIndex);});}});currentIndex=index;updateCounter();cards.forEach(card=>{let textBlock=card.querySelector(".review-text");let fullText=textBlock.getAttribute("data-full-text");textBlock.textContent=fullText;if(textBlock.scrollHeight>textBlock.clientHeight){let words=fullText.split(" ");let truncatedText="";let readMoreBtn=document.createElement("span");readMoreBtn.classList.add("read-more");readMoreBtn.textContent=" Ð”Ð°Ð»ÐµÐµ...";for(let i=0;i<words.length;i++){textBlock.textContent=truncatedText+words[i]+"Ð”Ð°Ð»ÐµÐµÐ”Ð°Ð»ÐµÐµ";if(textBlock.scrollHeight>textBlock.clientHeight){break;}
truncatedText+=words[i]+" ";}
textBlock.textContent=truncatedText.trim()+"...";textBlock.appendChild(readMoreBtn);textBlock.addEventListener("click",()=>{if(textBlock.classList.toggle("expanded")){textBlock.textContent=fullText;textBlock.appendChild(readMoreBtn);readMoreBtn.textContent=" Ð¡Ð²ÐµÑ€Ð½ÑƒÑ‚ÑŒ";}else{textBlock.textContent=truncatedText.trim()+"...";textBlock.appendChild(readMoreBtn);readMoreBtn.textContent=" Ð”Ð°Ð»ÐµÐµ...";}});}});}
function initReviews(){const container=document.getElementById('reviewsContainer');const prevButton=document.getElementById('prevButton');const nextButton=document.getElementById('nextButton');prevButton.addEventListener('click',()=>{scrollToReview(currentIndex-1,'prev');});nextButton.addEventListener('click',()=>{scrollToReview(currentIndex+1,'next');});document.addEventListener('keydown',(e)=>{if(e.key==='ArrowLeft')prevButton.click();if(e.key==='ArrowRight')nextButton.click();});requestAnimationFrame(()=>{scrollToReview(currentIndex);});}
window.addEventListener('load',initReviews);